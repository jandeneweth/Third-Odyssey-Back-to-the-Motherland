namespace = nat_mechanics

## Monthly maintenance event, on_start of pulse_system
country_event = {
	id = nat_mechanics.1
	title = nhs_maintenance_event.t
	desc = nhs_maintenance_event.d
	picture = cahokia_eventPicture
	
	is_triggered_only = yes
	hidden = yes
	
	immediate = {
		# change_variable = { which = nhs_cah_aggression value = 10 }
		# country_event = { id = nat_native_aggression.1 days = 10 }
		# log = "NHS: MAINTENANCE EVENT"
		# log = "MONTHLY DISASTER"
		nat_maintenance = yes
	}
	
	option = {
		name = "nhs_maintenance_event.a"
	}
}

## Native calculate advancement points
country_event = {
	id = nat_mechanics.2
	title = nhs_maintenance_event.t
	desc = nhs_maintenance_event.d
	picture = cahokia_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	trigger = {
		has_reform = native_basic_reform
		NOT = { is_considered_advanced = yes }
	}
	
	immediate = {
		nat_calculate_advancement_points = yes
	}
	option = {
		name = nhs_maintenance_event.a
	}
}

# country_event = {
	# id = nat_mechanics.6
	# title = nat_mechanics.6.t
	# desc = nat_mechanics.6.d
	# picture = COURT_eventPicture
	
	# hidden = yes
	# is_triggered_only = yes
	
	# immediate = {
		# NHS = {
			# every_owned_province = {
				# set_province_flag = nhs_elysianism_new
			# }
		# }
	# }
	# option = {
		# name = nhs2_bookmark.3.a
	# }
# }

# country_event = {
	# id = nat_mechanics.5
	# title = nat_mechanics.5.t
	# desc = nat_mechanics.5.d
	# picture = COURT_eventPicture
	
	# hidden = yes
	# trigger = {
		# any_province = {
			# continent = north_america
			# OR = {
				# feudalism = 100
				# has_province_flag = nhs_elysianism
				# has_province_flag = nhs_elysianism_old
				# has_province_flag = nhs_elysianism_new
			# }
		# }
		# any_province = {
			# continent = north_america
			# NOT = { has_province_flag = nhs_elysianism }
			# NOT = { has_province_flag = nhs_elysianism_old }
			# NOT = { has_province_flag = nhs_elysianism_new }
			# NOT = { feudalism = 100 }
		# }
		# OR = {
			# NOT = { has_global_flag = nhs_elysianism_spread_cd }
			# had_global_flag = {
				# flag = nhs_elysianism_spread_cd
				# days = 1825
			# }
		# }
		# is_year = 1450
	# }
	
	# immediate = {
		# clr_global_flag = nhs_elysianism_spread_cd
		# set_global_flag = nhs_elysianism_spread_cd
		# every_province = {
			# limit = {
				# has_province_flag = nhs_elysianism
			# }
			# clr_province_flag = nhs_elysianism
			# set_province_flag = nhs_elysianism_old
		# }
		# every_province = {
			# limit = {
				# has_province_flag = nhs_elysianism_new
			# }
			# clr_province_flag = nhs_elysianism_new
			# set_province_flag = nhs_elysianism
		# }
		# every_province = {
			# limit = {
				# OR = {
					# any_neighbor_province = {
						# OR = {
							# has_province_flag = nhs_elysianism
							# feudalism = 100
						# }
						# continent = north_america
					# }
					# any_empty_neighbor_province = {
						# OR = {
							# has_province_flag = nhs_elysianism
							# feudalism = 100
						# }
						# continent = north_america
					# }
				# }
				# OR = {
					# NOT = {
						# AND = {
							# area = james_bay_area
							# OR = {
								# has_port = yes
								# province_id = 1002
							# }
						# }
					# }
					# AND = {
						# province_id = 1002
						# OR = {
							# 2580 = {
								# OR = {
									# has_province_flag = nhs_elysianism
									# feudalism = 100
								# }
							# }
							# 2581 = {
								# OR = {
									# has_province_flag = nhs_elysianism
									# feudalism = 100
								# }
							# }
						# }
					# }
					# OR = {
						# any_neighbor_province = {
							# OR = {
								# has_province_flag = nhs_elysianism
								# feudalism = 100
							# }
							# OR = {
								# area = james_bay_area
								# area = hudson_bay_area
							# }
							# continent = north_america
						# }
						# any_empty_neighbor_province = {
							# OR = {
								# has_province_flag = nhs_elysianism
								# feudalism = 100
							# }
							# OR = {
								# area = james_bay_area
								# area = hudson_bay_area
							# }
							# continent = north_america
						# }
					# }
				# }
				# NOT = { has_province_flag = nhs_elysianism }
				# NOT = { has_province_flag = nhs_elysianism_new }
				# NOT = { has_province_flag = nhs_elysianism_old }
				# continent = north_america
			# }
			# set_province_flag = nhs_elysianism_new
			# #if = { #testing only
			# #	limit = {
			# #		is_capital = no
			# #	}
			# #	cede_province = MSG
			# #}
		# }
	# }
	# option = {
		# name = nhs2_bookmark.3.a
	# }
# }

# country_event = {
	# id = nat_mechanics.1
	# title = nat_mechanics.1.t
	# desc = nat_mechanics.1.d
	# picture = COURT_eventPicture
	
	# hidden = yes
	# is_triggered_only = yes
	# trigger = {
		# any_province = {
			# continent = north_america
			# OR = {
				# feudalism = 100
				# has_province_flag = nhs_elysianism
				# has_province_flag = nhs_elysianism_old
				# has_province_flag = nhs_elysianism_new
			# }
		# }
		# any_province = {
			# continent = north_america
			# NOT = { has_province_flag = nhs_elysianism }
			# NOT = { has_province_flag = nhs_elysianism_old }
			# NOT = { has_province_flag = nhs_elysianism_new }
			# NOT = { feudalism = 100 }
		# }
		# is_year = 1450
	# }
	
	# immediate = {
		# set_global_flag = nhs_elysianism_spread_cd
		# every_province = {
			# limit = {
				# has_province_flag = nhs_elysianism
			# }
			# clr_province_flag = nhs_elysianism
			# set_province_flag = nhs_elysianism_old
		# }
		# every_province = {
			# limit = {
				# has_province_flag = nhs_elysianism_new
			# }
			# clr_province_flag = nhs_elysianism_new
			# set_province_flag = nhs_elysianism
		# }
		# every_province = {
			# limit = {
				# OR = {
					# any_neighbor_province = {
						# OR = {
							# has_province_flag = nhs_elysianism
							# feudalism = 100
						# }
						# continent = north_america
					# }
					# any_empty_neighbor_province = {
						# OR = {
							# has_province_flag = nhs_elysianism
							# feudalism = 100
						# }
						# continent = north_america
					# }
				# }
				# OR = {
					# NOT = {
						# AND = {
							# area = james_bay_area
							# OR = {
								# has_port = yes
								# province_id = 1002
							# }
						# }
					# }
					# AND = {
						# province_id = 1002
						# OR = {
							# 2580 = {
								# OR = {
									# has_province_flag = nhs_elysianism
									# feudalism = 100
								# }
							# }
							# 2581 = {
								# OR = {
									# has_province_flag = nhs_elysianism
									# feudalism = 100
								# }
							# }
						# }
					# }
					# OR = {
						# any_neighbor_province = {
							# OR = {
								# has_province_flag = nhs_elysianism
								# feudalism = 100
							# }
							# OR = {
								# area = james_bay_area
								# area = hudson_bay_area
							# }
							# continent = north_america
						# }
						# any_empty_neighbor_province = {
							# OR = {
								# has_province_flag = nhs_elysianism
								# feudalism = 100
							# }
							# OR = {
								# area = james_bay_area
								# area = hudson_bay_area
							# }
							# continent = north_america
						# }
					# }
				# }
				# NOT = { has_province_flag = nhs_elysianism }
				# NOT = { has_province_flag = nhs_elysianism_new }
				# NOT = { has_province_flag = nhs_elysianism_old }
				# continent = north_america
			# }
			# set_province_flag = nhs_elysianism_new
			# #if = { #testing only
			# #	limit = {
			# #		is_capital = no
			# #	}
			# #	cede_province = MSG
			# #}
			# change_variable = { which = YearVar value = -1 }
			# if = {
				# limit = {
					# check_variable = { which = YearVar value = 1 }
				# }
				# country_event = { id = nat_mechanics.1 }
			# }
		# }
	# }
	# option = {
		# name = nhs2_bookmark.3.a
	# }
# }